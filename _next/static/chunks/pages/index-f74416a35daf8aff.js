(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(9664)}])},9664:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(7876),r=a(4232);function l(){var e;let[t,a]=(0,r.useState)([{sender:"asher",text:"Hi, I'm ASHER! How can I help you today?"}]),[l,s]=(0,r.useState)(""),[o,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)("dark"),[u,h]=(0,r.useState)(""),[x,p]=(0,r.useState)("3rd Grade"),[b,g]=(0,r.useState)("General"),[w,m]=(0,r.useState)(!1),f=(0,r.useRef)(null),v=(0,r.useRef)({synth:null,voice:null});(0,r.useEffect)(()=>{{let e=window.speechSynthesis;v.current.synth=e;let t=()=>{let t=e.getVoices();t.length&&(v.current.voice=t.find(e=>e.name.includes("Google UK English Female"))||t.find(e=>e.name.includes("Samantha"))||t.find(e=>e.name.toLowerCase().includes("child"))||t[0])};if(void 0!==e.onvoiceschanged&&(e.onvoiceschanged=t),t(),"webkitSpeechRecognition"in window){let e=new window.webkitSpeechRecognition;e.continuous=!1,e.interimResults=!1,e.lang="en-US",e.onresult=e=>{let t=e.results[0][0].transcript;s(t),y(t)},f.current=e}}},[]);let y=async e=>{if(e.trim()){a([...t,{sender:"user",text:e}]),s("");try{var n;let t=await fetch("/api/ask-gpt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,context:"".concat(u,"\nGrade Level: ").concat(x,"\nSubject: ").concat(b,"\nMode: ").concat(w?"Quiz":"Assistive")})}),r=(await t.json()).reply;a(e=>[...e,{sender:"asher",text:r}]);let l=null==(n=v.current)?void 0:n.synth;if(l&&v.current.voice&&!l.speaking){let e=new SpeechSynthesisUtterance(r);e.pitch=1.4,e.rate=1.05,e.voice=v.current.voice,e.onstart=()=>i(!0),e.onend=()=>i(!1),l.speak(e)}else console.warn("Speech synthesis not ready or already speaking.")}catch(e){console.error("Error fetching GPT reply:",e)}}};return(0,n.jsxs)("div",{className:"min-h-screen ".concat("dark"===d?"bg-gradient-to-b from-purple-900 to-black":"bg-gradient-to-b from-white to-gray-200"," flex flex-col items-center justify-end p-8 relative overflow-hidden"),children:[(0,n.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2 z-50 flex-wrap",children:[(0,n.jsxs)("label",{className:"cursor-pointer bg-white text-black px-3 py-1 rounded-xl shadow",children:["\uD83D\uDCC4 Upload Content",(0,n.jsx)("input",{type:"file",accept:".txt,.doc,.docx,.pdf",onChange:e=>{let t=e.target.files[0];if(!t)return;let n=new FileReader;n.onload=e=>{h(e.target.result),a(e=>[...e,{sender:"asher",text:"Thanks! I've received your document and will use it to help you better."}])},n.readAsText(t)},className:"hidden"})]}),(0,n.jsx)("select",{value:x,onChange:e=>p(e.target.value),className:"bg-white text-black px-3 py-1 rounded-xl shadow",children:["1st Grade","2nd Grade","3rd Grade","4th Grade","5th Grade","6th Grade","7th Grade","8th Grade"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("select",{value:b,onChange:e=>g(e.target.value),className:"bg-white text-black px-3 py-1 rounded-xl shadow",children:["General","Math","Reading","Science","History"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("button",{onClick:()=>m(e=>!e),className:"bg-yellow-400 text-black px-3 py-1 rounded-xl shadow",children:w?"Exit Quiz Mode":"Start Quiz Mode"}),(0,n.jsxs)("button",{onClick:()=>{c(e=>"dark"===e?"light":"dark")},className:"bg-white text-black px-3 py-1 rounded-xl shadow",children:["Toggle ","dark"===d?"Light":"Dark"," Mode"]})]}),(0,n.jsx)("img",{src:"/alien-avatar.png",alt:"ASHER Avatar",onError:e=>{e.target.onerror=null,e.target.src="/fallback-avatar.png"},className:"absolute bottom-[88px] left-4 w-32 h-32 z-10"}),t.length>0&&(0,n.jsxs)("div",{className:"absolute left-[128px] bottom-[128px] bg-white text-gray-800 px-4 py-2 rounded-2xl text-sm shadow-xl max-w-sm z-20",children:[(0,n.jsx)("p",{children:null==(e=t[t.length-1])?void 0:e.text}),(0,n.jsx)("div",{className:"absolute left-[-10px] top-4 w-0 h-0 border-t-[10px] border-t-transparent border-b-[10px] border-b-transparent border-r-[10px] border-r-white"})]}),(0,n.jsxs)("div",{className:"w-full max-w-xl flex items-center mt-4 z-30",children:[(0,n.jsx)("input",{className:"flex-1 p-2 rounded-l-xl border-t border-b border-l border-white bg-white text-black ml-36",type:"text",placeholder:"Ask ASHER a question...",value:l,onChange:e=>s(e.target.value)}),(0,n.jsx)("button",{className:"bg-blue-500 text-white px-4 rounded-r-xl",onClick:()=>y(l),children:"Send"}),(0,n.jsx)("button",{className:"ml-2 bg-purple-500 text-white px-3 py-2 rounded-xl",onClick:()=>{var e;null==(e=f.current)||e.start()},children:"\uD83C\uDFA4"})]})]})}function s(){return(0,n.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsx)(l,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2936)),_N_E=e.O()}]);